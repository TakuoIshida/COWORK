version: 0.2

phases:
  install:
    runtime-versions:
      ruby: 2.6
    commands:
      - echo install started on `date`
      - apt-get update
      - apt-get -y install nodejs
      - apt-get -y install nodejs-dev node-gyp libssl1.0-dev
      - apt-get -y install npm
      - update-alternatives --install /usr/bin/node node /usr/bin/nodejs 10
      - gem install bundler -v 1.17.2
      - sudo bundle install
  build:
    commands:
      - echo Build started on `date`
      - bundle exec rails test
  post_build:
    commands:
      - echo Build completed on `date`